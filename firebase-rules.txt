// Regles Firestore recommandees pour VIRUS
// A copier dans Firebase Console > Firestore > Rules
//
// NOTE: Ces regles sont permissives car l'authentification est basee
// sur localStorage (pas Firebase Auth). Pour renforcer la securite,
// migrer vers Firebase Auth et utiliser request.auth.uid.

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Players : lecture publique, ecriture libre (pas de Firebase Auth)
    match /players/{playerId} {
      allow read: if true;
      allow write: if true;
    }

    // Parties : lecture publique, creation/modification libre
    match /parties/{partyId} {
      allow read: if true;
      allow write: if true;
    }

    // PartyPlayers : lecture publique, ecriture libre
    match /partyPlayers/{docId} {
      allow read: if true;
      allow write: if true;
    }

    // Chat messages (lobby + meeting)
    match /chatMessages/{docId} {
      allow read: if true;
      allow write: if true;
    }

    // Cadavres (corps des joueurs elimines)
    match /cadavres/{docId} {
      allow read: if true;
      allow write: if true;
    }

    // Meetings (reunions d'urgence)
    match /meetings/{docId} {
      allow read: if true;
      allow write: if true;
    }

    // Votes (votes pendant les reunions)
    match /votes/{docId} {
      allow read: if true;
      allow write: if true;
    }

    // Friend requests
    match /friendRequests/{docId} {
      allow read: if true;
      allow write: if true;
    }

    // Friends (relations bidirectionnelles)
    match /friends/{docId} {
      allow read: if true;
      allow write: if true;
    }

    // Invitations de partie
    match /gameInvites/{docId} {
      allow read: if true;
      allow write: if true;
    }
  }
}
