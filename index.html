<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VIRUS - Le Centre Commercial est Infecte</title>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
  <!-- CSS -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/menu.css">
  <link rel="stylesheet" href="css/lobby.css?v=5">
  <link rel="stylesheet" href="css/game.css">
  <link rel="stylesheet" href="css/hud.css">
  <link rel="stylesheet" href="css/meeting.css?v=5">
  <link rel="stylesheet" href="css/friends.css">
  <link rel="stylesheet" href="css/responsive.css?v=20260224b">
  <link rel="stylesheet" href="css/minigames.css">
</head>
<body>

  <!-- ============================== -->
  <!-- ECRAN 0 : CREATION DE COMPTE  -->
  <!-- ============================== -->
  <div id="ecran-compte" class="screen bg-mall">
    <h1 class="titre-virus" style="margin-top:0;">VIRUS</h1>

    <div class="compte-carte">
      <div class="compte-header">
        <h3 data-i18n="createAccount">CREER TON COMPTE</h3>
        <p data-i18n="chooseNickname">Choisis un pseudo pour jouer</p>
      </div>
      <div class="compte-body">
        <div class="compte-avatar">&#128566;</div>
        <div class="compte-champ">
          <label data-i18n="pseudo">TON PSEUDO</label>
          <input type="text" id="input-pseudo-compte" placeholder="Entre ton pseudo..." maxlength="20" data-i18n="phPseudo" data-i18n-attr="placeholder">
        </div>
        <div class="compte-champ">
          <label>LANGUE / LANGUAGE</label>
          <div class="lang-selector" style="margin-top:4px;">
            <button class="lang-btn active" id="compte-lang-fr" onclick="setLangueCompte('fr')">Francais</button>
            <button class="lang-btn" id="compte-lang-en" onclick="setLangueCompte('en')">English</button>
          </div>
        </div>
        <button class="btn-creer-compte" onclick="creerCompte()" data-i18n="play">C'EST PARTI !</button>
      </div>
    </div>

    <span class="version">VIRUS v0.1 - ALPHA</span>
  </div>

  <!-- ============================== -->
  <!-- ECRAN CONFIG HORS LIGNE        -->
  <!-- ============================== -->
  <div id="config-horsline" class="screen bg-mall">
    <div class="config-hl-scroll">
    <button class="btn-retour" onclick="showScreen('menu-principal')" data-i18n="back">&#9664; RETOUR</button>

    <h1 class="online-titre" style="color:#7f8c8d;" data-i18n="offline">HORS LIGNE</h1>
    <span class="online-sous-titre" style="color:#95a5a6;" data-i18n="config">CONFIGURATION</span>

    <div class="config-hl-formulaire">
      <div class="config-hl-header"><h3 data-i18n="gameSettings">PARAMETRES DE LA PARTIE</h3></div>
      <div class="config-hl-body">

        <div class="config-hl-champ">
          <label data-i18n="nbPlayers">NOMBRE DE JOUEURS</label>
          <div class="config-hl-slider-row">
            <input type="range" id="hl-nb-joueurs" min="4" max="15" value="4" oninput="majConfigHL()">
            <div class="config-hl-valeur" id="hl-nb-joueurs-val">4</div>
          </div>
        </div>

        <div class="config-hl-champ">
          <label data-i18n="nbVirus">NOMBRE DE VIRUS</label>
          <div class="config-hl-slider-row">
            <input type="range" id="hl-nb-virus" min="1" max="3" value="1" oninput="majConfigHL()">
            <div class="config-hl-valeur" id="hl-nb-virus-val">1</div>
          </div>
        </div>

        <div class="config-hl-champ">
          <label data-i18n="journalist">JOURNALISTE</label>
          <div class="config-hl-toggle-row">
            <div class="config-hl-toggle" id="hl-toggle-journaliste" onclick="toggleJournalisteHL()"></div>
            <span class="config-hl-toggle-label" id="hl-toggle-journaliste-label" data-i18n="zeroJournalist">0 JOURNALISTE</span>
          </div>
        </div>

        <div class="config-hl-champ">
          <label><span data-i18n="fanaticRole">FANATIQUE</span> <span style="color:#8e44ad; font-size:10px;" data-i18n="fanaticNeutral">(NEUTRE)</span></label>
          <div class="config-hl-toggle-row">
            <div class="config-hl-toggle" id="hl-toggle-fanatique" onclick="toggleFanatiqueHL()"></div>
            <span class="config-hl-toggle-label" id="hl-toggle-fanatique-label" data-i18n="zeroFanatic">0 FANATIQUE</span>
          </div>
        </div>

        <div class="config-hl-champ">
          <label><span data-i18n="spyRole">ESPION</span> <span style="color:#9b59b6; font-size:10px;" data-i18n="spyNeutral">(NEUTRE)</span></label>
          <div class="config-hl-toggle-row">
            <div class="config-hl-toggle" id="hl-toggle-espion" onclick="toggleEspionHL()"></div>
            <span class="config-hl-toggle-label" id="hl-toggle-espion-label" data-i18n="zeroSpy">0 ESPION</span>
          </div>
        </div>

        <div class="config-hl-resume" id="hl-resume">
          <div class="config-hl-resume-item"><span data-i18n="totalPlayers">Total :</span> <span id="hl-resume-total">4</span> <span data-i18n="players">joueurs</span></div>
          <div class="config-hl-resume-item"><span data-i18n="innocentsLabel">Innocents :</span> <span id="hl-resume-innocents">3</span></div>
          <div class="config-hl-resume-item"><span data-i18n="virusLabel">Virus :</span> <span id="hl-resume-virus">1</span></div>
          <div class="config-hl-resume-item"><span data-i18n="journalistLabel">Journaliste :</span> <span id="hl-resume-journaliste">0</span></div>
          <div class="config-hl-resume-item"><span data-i18n="fanaticLabel">Fanatique :</span> <span id="hl-resume-fanatique">0</span></div>
          <div class="config-hl-resume-item"><span data-i18n="spyLabel">Espion :</span> <span id="hl-resume-espion">0</span></div>
        </div>

        <button class="btn-lancer-hl" onclick="validerConfigHL()" data-i18n="launch">LANCER LA PARTIE</button>
      </div>
    </div>

    <span class="version">VIRUS v0.1 - ALPHA</span>
    </div>
  </div>

  <!-- ============================== -->
  <!-- POPUP PARAMETRES               -->
  <!-- ============================== -->
  <div class="popup-overlay" id="popup-params">
    <div class="popup-box">
      <div class="popup-header">
        <h3 data-i18n="settings">PARAMETRES</h3>
        <button class="popup-close" onclick="fermerParams()">&times;</button>
      </div>
      <div class="popup-body">
        <div class="popup-section">
          <label data-i18n="pseudo">PSEUDO</label>
          <div class="pseudo-edit-row">
            <span style="color:#aaa;font-size:14px;" id="input-edit-pseudo-display"></span>
          </div>
        </div>
        <div class="popup-section">
          <label>LANGUE / LANGUAGE</label>
          <div class="lang-selector">
            <button class="lang-btn active" id="lang-fr" onclick="setLanguage('fr')">Francais</button>
            <button class="lang-btn" id="lang-en" onclick="setLanguage('en')">English</button>
          </div>
        </div>
        <div class="popup-section">
          <label data-i18n="account">COMPTE</label>
          <button class="btn-sauver-pseudo" data-i18n="deleteAccount" style="background:linear-gradient(180deg,#e74c3c,#c0392b); border-color:#e74c3c; width:100%; padding:10px;" onclick="supprimerCompte()">SUPPRIMER MON COMPTE</button>
        </div>
        <p class="popup-info" data-i18n="savedAuto" data-i18n-html>Les changements sont sauvegardes automatiquement.<br>VIRUS v0.1 - ALPHA</p>
      </div>
    </div>
  </div>

  <!-- ============================== -->
  <!-- ECRAN 1 : MENU PRINCIPAL      -->
  <!-- ============================== -->
  <audio id="musique-menu" loop preload="auto" src="musique/Destroyed/destroyed-multiverse-album.mp3"></audio>

  <div id="menu-principal" class="screen bg-mall">
    <button class="btn-musique" id="btn-musique" onclick="toggleMusique()" title="Musique">&#9835;</button>
    <div class="menu-pseudo-bar" id="pseudo-bar">
      <div class="menu-gold">
        <span class="menu-gold-icon">&#9733;</span>
        <span class="menu-gold-val" id="gold-display">0</span>
      </div>
      <div class="menu-pseudo-dot"></div>
      <span class="menu-pseudo-nom" id="pseudo-display">---</span>
      <button class="menu-pseudo-edit" onclick="ouvrirParams()" title="Parametres">&#9881;</button>
    </div>
    <div class="virus-icons">
      <svg class="virus-icon" viewBox="-35 -35 70 70">
        <circle cx="0" cy="0" r="18" fill="none" stroke="#e74c3c" stroke-width="2"/>
        <circle cx="0" cy="0" r="10" fill="#e74c3c" opacity="0.3"/>
        <line x1="0" y1="-18" x2="0" y2="-26" stroke="#e74c3c" stroke-width="2"/>
        <circle cx="0" cy="-28" r="3" fill="#e74c3c"/>
        <line x1="18" y1="0" x2="26" y2="0" stroke="#e74c3c" stroke-width="2"/>
        <circle cx="28" cy="0" r="3" fill="#e74c3c"/>
        <line x1="-18" y1="0" x2="-26" y2="0" stroke="#e74c3c" stroke-width="2"/>
        <circle cx="-28" cy="0" r="3" fill="#e74c3c"/>
        <line x1="13" y1="-13" x2="18" y2="-18" stroke="#e74c3c" stroke-width="2"/>
        <circle cx="20" cy="-20" r="2.5" fill="#e74c3c"/>
        <line x1="-13" y1="13" x2="-18" y2="18" stroke="#e74c3c" stroke-width="2"/>
        <circle cx="-20" cy="20" r="2.5" fill="#e74c3c"/>
      </svg>

      <h1 class="titre-virus">VIRUS</h1>

      <svg class="virus-icon" viewBox="-35 -35 70 70">
        <circle cx="0" cy="0" r="18" fill="none" stroke="#e74c3c" stroke-width="2"/>
        <circle cx="0" cy="0" r="10" fill="#e74c3c" opacity="0.3"/>
        <line x1="0" y1="-18" x2="0" y2="-26" stroke="#e74c3c" stroke-width="2"/>
        <circle cx="0" cy="-28" r="3" fill="#e74c3c"/>
        <line x1="18" y1="0" x2="26" y2="0" stroke="#e74c3c" stroke-width="2"/>
        <circle cx="28" cy="0" r="3" fill="#e74c3c"/>
        <line x1="-18" y1="0" x2="-26" y2="0" stroke="#e74c3c" stroke-width="2"/>
        <circle cx="-28" cy="0" r="3" fill="#e74c3c"/>
        <line x1="-13" y1="-13" x2="-18" y2="-18" stroke="#e74c3c" stroke-width="2"/>
        <circle cx="-20" cy="-20" r="2.5" fill="#e74c3c"/>
        <line x1="13" y1="13" x2="18" y2="18" stroke="#e74c3c" stroke-width="2"/>
        <circle cx="20" cy="20" r="2.5" fill="#e74c3c"/>
      </svg>
    </div>

    <div class="menu-buttons">
      <button class="btn btn-online" onclick="showScreen('menu-online')">
        <span data-i18n="online">ONLINE</span>
        <span class="btn-sub" data-i18n="joinOrCreate">Rejoindre ou creer une partie</span>
      </button>
      <button class="btn btn-horsline" onclick="showScreen('config-horsline')">
        <span data-i18n="offline">HORS LIGNE</span>
        <span class="btn-sub" data-i18n="playWithBots">Jouer avec des bots</span>
      </button>
      <button class="btn btn-boutique" onclick="showScreen('boutique-skins')">
        <span data-i18n="shop">BOUTIQUE</span>
        <span class="btn-sub" data-i18n="skinsAccs">Skins et accessoires</span>
      </button>
      <button class="btn btn-casier" onclick="ouvrirCabine()">
        <span data-i18n="locker">CASIER</span>
        <span class="btn-sub" data-i18n="changeSkin">Changer de skin</span>
      </button>
      <button class="btn btn-param" onclick="ouvrirParams()" data-i18n="settings">PARAMETRES</button>
    </div>

    <div class="regles-panneau">
      <div class="regles-header"><h3 data-i18n="rules">REGLES DU JEU</h3></div>
      <div class="regles-liste">
        <div class="regle-item">
          <div class="regle-num" style="background:#e74c3c">1</div>
          <div class="regle-texte">
            <h4 data-i18n="rule1Title">Le Virus se propage</h4>
            <p data-i18n="rule1Desc">Un joueur est infecte et doit contaminer les autres dans le centre commercial.</p>
          </div>
        </div>
        <div class="regle-item">
          <div class="regle-num" style="background:#3498db">2</div>
          <div class="regle-texte">
            <h4 data-i18n="rule2Title">Accomplir les missions</h4>
            <p data-i18n="rule2Desc">Les sains doivent completer leurs taches dans les boutiques pour gagner.</p>
          </div>
        </div>
        <div class="regle-item">
          <div class="regle-num" style="background:#f39c12">3</div>
          <div class="regle-texte">
            <h4 data-i18n="rule3Title">Voter pour eliminer</h4>
            <p data-i18n="rule3Desc">Signalez les suspects ! Votez ensemble pour demasquer le virus.</p>
          </div>
        </div>
        <div class="regle-item">
          <div class="regle-num" style="background:#2ecc71">4</div>
          <div class="regle-texte">
            <h4 data-i18n="rule4Title">Survivre ou infecter</h4>
            <p data-i18n="rule4Desc">Sains : terminez les missions ou trouvez le virus. Virus : infectez tout le monde !</p>
          </div>
        </div>
        <div class="regle-item">
          <div class="regle-num" style="background:#9b59b6">5</div>
          <div class="regle-texte">
            <h4 data-i18n="rule5Title">Devenir un fantome</h4>
            <p data-i18n="rule5Desc">Si vous etes infecte, apres 5 secondes vous devenez un fantome invisible.</p>
          </div>
        </div>
        <div class="regle-item">
          <div class="regle-num" style="background:#3498db">6</div>
          <div class="regle-texte">
            <h4 data-i18n="rule6Title">Le Journaliste enquete</h4>
            <p data-i18n="rule6Desc">Le journaliste peut enqueter sur les joueurs pour decouvrir s'ils sont virus ou non.</p>
          </div>
        </div>
        <div class="regle-item">
          <div class="regle-num" style="background:#8e44ad">7</div>
          <div class="regle-texte">
            <h4 data-i18n="rule7Title">Le Fanatique (neutre)</h4>
            <p data-i18n="rule7Desc">Son but : se faire eliminer ! S'il meurt, la partie se termine et il gagne avec l'espion.</p>
          </div>
        </div>
        <div class="regle-item">
          <div class="regle-num" style="background:#9b59b6">8</div>
          <div class="regle-texte">
            <h4 data-i18n="rule8Title">L'Espion (neutre)</h4>
            <p data-i18n="rule8Desc">Il choisit un camp au debut. S'il choisit virus, il les voit mais ne peut pas etre tue par eux. Il gagne avec son camp. Si le fanatique gagne, l'espion gagne aussi !</p>
          </div>
        </div>
      </div>
    </div>

    <span class="version">VIRUS v0.1 - ALPHA</span>
  </div>

  <!-- ============================== -->
  <!-- ECRAN : BOUTIQUE DE SKINS     -->
  <!-- ============================== -->
  <div id="boutique-skins" class="screen bg-mall">
    <button class="btn-retour" onclick="showScreen('menu-principal')" data-i18n="back">&#9664; RETOUR</button>

    <h1 class="boutique-titre" data-i18n="shop">BOUTIQUE</h1>

    <div class="boutique-gold-bar">
      <span class="gold-icon">&#9733;</span>
      <span class="gold-val" id="boutique-gold-display">0</span>
    </div>

    <div class="boutique-tabs">
      <button class="boutique-tab active" id="boutique-tab-skins" onclick="switchBoutiqueTab('skins')" data-i18n="skinsTab">SKINS</button>
      <button class="boutique-tab" id="boutique-tab-musique" onclick="switchBoutiqueTab('musique')" data-i18n="musicTab">MUSIQUE</button>
    </div>

    <div class="boutique-tab-content active" id="boutique-content-skins">
      <div class="boutique-grille" id="boutique-grille">
      </div>
    </div>

    <div class="boutique-tab-content" id="boutique-content-musique">
      <div class="boutique-grille" id="boutique-grille-musique">
      </div>
    </div>
  </div>

  <!-- ============================== -->
  <!-- ECRAN 2 : MENU ONLINE         -->
  <!-- ============================== -->
  <div id="menu-online" class="screen bg-mall">
    <div class="online-scroll">
    <button class="btn-retour" onclick="showScreen('menu-principal')" data-i18n="back">&#9664; RETOUR</button>

    <h1 class="online-titre">VIRUS</h1>
    <span class="online-sous-titre" data-i18n="online">ONLINE</span>

    <div class="panneau-central">
      <button class="btn btn-creer" onclick="showScreen('creer-partie')">
        <div class="btn-icon">+</div>
        <div class="btn-content">
          <span class="btn-label" data-i18n="createGame">CREER UNE PARTIE</span>
          <span class="btn-sub" data-i18n="inviteFriends">Invitez vos amis a rejoindre</span>
        </div>
      </button>

      <div class="separateur-ou">
        <div class="ligne"></div>
        <div class="ou-cercle" data-i18n="or">OU</div>
        <div class="ligne"></div>
      </div>

      <button class="btn btn-trouver" onclick="showScreen('liste-parties')">
        <div class="btn-icon">&#128269;</div>
        <div class="btn-content">
          <span class="btn-label" data-i18n="findGame">TROUVER UNE PARTIE</span>
          <span class="btn-sub" data-i18n="joinExisting">Rejoindre une partie existante</span>
        </div>
      </button>
    </div>

    <div class="info-bas" data-i18n="createDesc">
      Creez votre propre partie et invitez vos amis, ou rejoignez une partie existante.
    </div>

    <span class="version">VIRUS v0.1 - ALPHA</span>
    </div>
  </div>

  <!-- ============================== -->
  <!-- ECRAN 5 : CREER UNE PARTIE    -->
  <!-- ============================== -->
  <div id="creer-partie" class="screen bg-mall">
    <div class="cp-scroll">
    <button class="btn-retour" onclick="showScreen('menu-online')" data-i18n="back">&#9664; RETOUR</button>

    <h1 class="online-titre">VIRUS</h1>
    <span class="online-sous-titre" data-i18n="createGame">CREER UNE PARTIE</span>

    <div class="cp-formulaire">
      <div class="cp-header"><h3 data-i18n="newGame">NOUVELLE PARTIE</h3></div>
      <div class="cp-body">
        <div class="cp-champ">
          <label data-i18n="gameName">NOM DE LA PARTIE</label>
          <input type="text" id="cp-nom" placeholder="Ex: Ma super partie" maxlength="30" data-i18n="phGameName" data-i18n-attr="placeholder">
        </div>
        <div class="cp-champ">
          <label data-i18n="maxPlayers">NOMBRE MAX DE JOUEURS</label>
          <select id="cp-max-joueurs" onchange="mettreAJourOptionsVirus()">
            <option value="4">4 joueurs</option>
            <option value="5">5 joueurs</option>
            <option value="6">6 joueurs</option>
            <option value="7">7 joueurs</option>
            <option value="8">8 joueurs</option>
            <option value="9">9 joueurs</option>
            <option value="10" selected>10 joueurs</option>
            <option value="11">11 joueurs</option>
            <option value="12">12 joueurs</option>
            <option value="13">13 joueurs</option>
            <option value="14">14 joueurs</option>
            <option value="15">15 joueurs</option>
          </select>
        </div>
        <div class="cp-champ">
          <label data-i18n="nbVillains">NOMBRE DE MECHANTS (VIRUS)</label>
          <select id="cp-mechants">
            <option value="1" selected>1 virus</option>
            <option value="2">2 virus</option>
            <option value="3">3 virus</option>
          </select>
        </div>
        <div class="cp-roles-grid">
          <div class="cp-role-item">
            <label data-i18n="journalist">JOURNALISTE</label>
            <div class="cp-toggle-row">
              <div class="cp-toggle" id="cp-toggle-journaliste" onclick="toggleCpJournaliste()"></div>
              <span class="cp-toggle-label" id="cp-toggle-journaliste-label" data-i18n="zeroJournalist">0 JOURNALISTE</span>
            </div>
          </div>
          <div class="cp-role-item">
            <label>FANATIQUE <span style="color:#8e44ad;font-size:10px" data-i18n="fanaticNeutral">(NEUTRE)</span></label>
            <div class="cp-toggle-row">
              <div class="cp-toggle cp-fanatic" id="cp-toggle-fanatique" onclick="toggleCpFanatique()"></div>
              <span class="cp-toggle-label cp-fanatic-label" id="cp-toggle-fanatique-label" data-i18n="zeroFanatic">0 FANATIQUE</span>
            </div>
          </div>
          <div class="cp-role-item">
            <label>ESPION <span style="color:#9b59b6;font-size:10px" data-i18n="spyNeutral">(NEUTRE)</span></label>
            <div class="cp-toggle-row">
              <div class="cp-toggle cp-spy" id="cp-toggle-espion" onclick="toggleCpEspion()"></div>
              <span class="cp-toggle-label cp-spy-label" id="cp-toggle-espion-label" data-i18n="zeroSpy">0 ESPION</span>
            </div>
          </div>
          <div class="cp-role-item">
            <label data-i18n="langLabel">LANGUE</label>
            <div class="lang-selector" style="margin-top:4px">
              <button class="lang-btn active" id="cp-lang-fr" onclick="setCpLang('fr')" style="padding:8px 10px;font-size:12px">FR</button>
              <button class="lang-btn" id="cp-lang-en" onclick="setCpLang('en')" style="padding:8px 10px;font-size:12px">EN</button>
            </div>
          </div>
        </div>
        <button class="btn-valider-creer" onclick="creerPartie()" data-i18n="create">CREER LA PARTIE</button>
      </div>
    </div>

    <span class="version">VIRUS v0.1 - ALPHA</span>
    </div>
  </div>

  <!-- ============================== -->
  <!-- ECRAN 4 : LISTE DES PARTIES   -->
  <!-- ============================== -->
  <div id="liste-parties" class="screen bg-mall">
    <button class="btn-retour" onclick="showScreen('menu-online')" data-i18n="back">&#9664; RETOUR</button>

    <h1 class="online-titre">VIRUS</h1>
    <span class="online-sous-titre" data-i18n="findGame">TROUVER UNE PARTIE</span>

    <div class="lp-conteneur">
      <div class="lp-header">
        <h3 data-i18n="waitingGames">PARTIES EN ATTENTE</h3>
        <span class="lp-count" id="lp-total" data-i18n="noGame">0 partie disponible</span>
      </div>

      <table class="lp-tableau">
        <thead>
          <tr>
            <th data-i18n="game">PARTIE</th>
            <th data-i18n="playersHeader">JOUEURS</th>
            <th data-i18n="villains">MECHANTS</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="lp-tbody">
        </tbody>
      </table>

      <div class="lp-vide" id="lp-vide">
        <div class="lp-vide-icone">&#128269;</div>
        <p>Aucune partie en attente pour le moment.<br>Creez-en une depuis le menu online !</p>
      </div>
    </div>

    <button class="btn-actualiser" onclick="rafraichirListeParties()">
      &#8635; ACTUALISER
    </button>

    <button class="btn-admin-purge" id="btn-purge-parties" onclick="purgerToutesLesParties()" style="display:none;">
      &#128465; PURGER TOUTES LES PARTIES
    </button>

    <span class="version">VIRUS v0.1 - ALPHA</span>
  </div>

  <!-- ============================== -->
  <!-- ECRAN 3 : SALLE D'ATTENTE     -->
  <!-- ============================== -->
  <div id="salle-attente" class="screen">
    <div class="sa-mur-haut"></div>

    <div class="sa-content" style="background: repeating-conic-gradient(#f0e6dc 0% 25%, #e8ddd3 0% 50%) 0 0 / 60px 60px;">

      <!-- Gauche : Cabines -->
      <div class="sa-gauche">
        <div class="panneau-cabines">
          <h3>CABINES</h3>
          <span>CHANGEZ DE SKIN</span>
        </div>

        <div class="cabines-grid">
          <div class="cabine" onclick="ouvrirCabine()">
            <div class="cabine-interieur">
              <div class="cabine-miroir"></div>
              <div class="cabine-rideau rideau-rouge"></div>
            </div>
            <div class="cabine-footer">
              <div class="cabine-statut statut-libre"></div>
              <div class="cabine-num" style="background:#e74c3c">1</div>
            </div>
          </div>
          <div class="cabine" onclick="ouvrirCabine()">
            <div class="cabine-interieur">
              <div class="cabine-miroir"></div>
              <div class="cabine-rideau rideau-bleu"></div>
            </div>
            <div class="cabine-footer">
              <div class="cabine-statut statut-libre"></div>
              <div class="cabine-num" style="background:#2e86c1">2</div>
            </div>
          </div>
          <div class="cabine" onclick="ouvrirCabine()">
            <div class="cabine-interieur">
              <div class="cabine-miroir"></div>
              <div class="cabine-rideau rideau-vert"></div>
            </div>
            <div class="cabine-footer">
              <div class="cabine-statut statut-occupe"></div>
              <div class="cabine-num" style="background:#27ae60">3</div>
            </div>
          </div>
          <div class="cabine" onclick="ouvrirCabine()">
            <div class="cabine-interieur">
              <div class="cabine-miroir"></div>
              <div class="cabine-rideau rideau-violet"></div>
            </div>
            <div class="cabine-footer">
              <div class="cabine-statut statut-libre"></div>
              <div class="cabine-num" style="background:#8e44ad">4</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Droite : UI -->
      <div class="sa-droite">
        <div class="sa-enseigne">
          <h2>VIRUS</h2>
          <span>SALLE D'ATTENTE</span>
        </div>

        <div class="sa-droite-content">
          <div class="sa-droite-col">
            <div class="sa-panneau-joueurs">
              <div class="sa-panneau-joueurs-header">
                <h4>JOUEURS</h4>
                <span class="compteur">0/10</span>
              </div>
              <div class="sa-joueurs-liste">
                <div class="sa-joueur-item attente">&#9675; <span data-i18n="waiting">En attente...</span></div>
              </div>
            </div>

            <button class="btn btn-demarrer" id="btn-demarrer" onclick="lancerJeu()" style="display:none;">
              DEMARRER
              <span class="btn-sub">(Host uniquement)</span>
            </button>
            <div id="msg-attente-host" style="display:none; background:rgba(44,62,80,0.8); border-radius:8px; padding:10px 15px; text-align:center;">
              <span style="color:#f39c12; font-size:12px; letter-spacing:1px;" data-i18n="waitingForHost">En attente du host pour demarrer...</span>
            </div>

            <button class="btn-retour" style="position:relative; top:0; left:0;" onclick="quitterPartie()">&#9664; QUITTER</button>
          </div>

          <div class="sa-droite-chat-col">
            <div class="sa-chat">
              <div class="sa-chat-header"><h4>CHAT</h4></div>
              <div class="sa-chat-messages" id="chat-messages">
              </div>
              <div class="sa-chat-input">
                <input type="text" id="chat-input" placeholder="Ecrire ici..." onkeydown="if(event.key==='Enter')sendChat()">
                <button onclick="sendChat()">&#9654;</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Bouton toggle chat mobile -->
      <button class="chat-toggle-btn" id="sa-chat-toggle" onclick="toggleChat('sa')">&#128172;</button>

      <!-- Notifications joueurs (bas gauche) -->
      <div class="sa-notifs" id="sa-notifs"></div>

      <!-- Decorations -->
      <div class="sa-entree">
        <span>ENTREE</span>
        <div class="fleche">&#9660;</div>
        <div class="fleche">&#9660;</div>
      </div>

      <div class="plante plante-1">
        <div class="plante-feuilles"></div>
        <div class="plante-pot"></div>
      </div>
      <div class="plante plante-2">
        <div class="plante-feuilles"></div>
        <div class="plante-pot"></div>
      </div>

      <!-- Joueur avatar dans la salle d'attente -->
      <div class="sa-joueur-avatar" id="sa-mon-avatar" style="left:50%; bottom:100px;">
        <span class="sa-avatar-pseudo" id="sa-avatar-pseudo"></span>
        <div class="sa-avatar-skin"><img id="sa-avatar-skin-img" src="skin/gratuit/skin-de-base-garcon.svg" alt="skin"></div>
      </div>

      <div class="distributeur">
        <div class="distributeur-vitre">
          <div class="canette" style="background:#e74c3c"></div>
          <div class="canette" style="background:#3498db"></div>
          <div class="canette" style="background:#f39c12"></div>
          <div class="canette" style="background:#2ecc71"></div>
          <div class="canette" style="background:#9b59b6"></div>
          <div class="canette" style="background:#e74c3c"></div>
          <div class="canette" style="background:#1abc9c"></div>
          <div class="canette" style="background:#f39c12"></div>
        </div>
        <div class="distributeur-fente"></div>
        <span>BOISSONS</span>
      </div>

    </div>

    <div class="sa-mur-bas"></div>
  </div>

  <!-- POPUP CASIER (LOCKER) -->
  <div class="cabine-popup-overlay" id="cabine-overlay" onclick="fermerCabine()"></div>
  <div class="cabine-popup" id="cabine-popup">
    <h3 data-i18n="locker">CASIER</h3>

    <div class="casier-tabs">
      <button class="casier-tab active" id="casier-tab-skin" onclick="switchCasierTab('skin')" data-i18n="skin">SKIN</button>
      <button class="casier-tab" id="casier-tab-musique" onclick="switchCasierTab('musique')" data-i18n="musicTab">MUSIQUE</button>
    </div>

    <div class="casier-tab-content active" id="casier-content-skin">
      <p data-i18n="chooseSkin">Choisis ton skin !</p>
      <div class="skin-selector" id="cabine-skin-selector"></div>
      <button class="cabine-popup-close" style="background:linear-gradient(180deg,#27ae60,#1e8449); margin-right:8px;" onclick="confirmerEtFermerCabine()" data-i18n="confirm">CONFIRMER</button>
      <button class="cabine-popup-close" onclick="fermerCabine()" data-i18n="cancel">ANNULER</button>
    </div>

    <div class="casier-tab-content" id="casier-content-musique">
      <p data-i18n="chooseMusic">Choisis ta musique !</p>
      <div class="musique-list" id="casier-musique-list"></div>
      <button class="cabine-popup-close" onclick="fermerCabine()" data-i18n="close">FERMER</button>
    </div>
  </div>

  <!-- ============================== -->
  <!-- ECRAN 6 : CENTRE COMMERCIAL    -->
  <!-- ============================== -->
  <div id="jeu" class="screen">
    <div class="jeu-viewport" id="jeu-viewport">
      <div class="mall-map" id="mall-map">

        <!-- Sol carrelage -->
        <div class="mall-sol"></div>

        <!-- Murs exterieurs -->
        <div class="mall-mur-ext mall-mur-ext-h" style="top:0; left:0;"></div>
        <div class="mall-mur-ext mall-mur-ext-h" style="bottom:0; left:0;"></div>
        <div class="mall-mur-ext mall-mur-ext-v" style="top:0; left:0;"></div>
        <div class="mall-mur-ext mall-mur-ext-v" style="top:0; right:0;"></div>

        <!-- Entrees du mall -->
        <div class="mall-entree" style="bottom:0; left:3700px; width:200px; height:20px;"><span>ENTREE PRINCIPALE SUD</span></div>
        <div class="mall-entree" style="top:0; left:3700px; width:200px; height:20px;"><span>ENTREE NORD</span></div>
        <div class="mall-entree" style="left:0; top:2800px; width:20px; height:120px;"><span style="writing-mode:vertical-lr;">SORTIE OUEST</span></div>
        <div class="mall-entree" style="right:0; top:2800px; width:20px; height:120px;"><span style="writing-mode:vertical-lr;">SORTIE EST</span></div>
        <div class="mall-entree" style="left:0; top:800px; width:20px; height:100px;"><span style="writing-mode:vertical-lr;">PARKING A</span></div>
        <div class="mall-entree" style="right:0; top:800px; width:20px; height:100px;"><span style="writing-mode:vertical-lr;">PARKING B</span></div>

        <!-- ================================================ -->
        <!-- AILE NORD-OUEST (haut gauche)                     -->
        <!-- ================================================ -->
        <div class="boutique b-mode" style="left:60px; top:60px; width:500px; height:400px;">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#128087;</div><div class="boutique-nom" style="font-size:16px;">BOUTIQUE MODE</div></div>
          <div class="obj-portant" style="left:30px; top:40px; width:80px;"></div>
          <div class="obj-portant" style="left:30px; top:100px; width:80px;"></div>
          <div class="obj-portant" style="left:30px; top:160px; width:80px;"></div>
          <div class="obj-miroir" style="left:15px; top:70px; height:40px;"></div>
          <div class="obj-miroir" style="left:15px; top:130px; height:40px;"></div>
          <div class="obj-cabine" style="right:20px; top:30px;"></div>
          <div class="obj-cabine" style="right:20px; top:100px;"></div>
          <div class="obj-comptoir" style="left:150px; bottom:30px; width:160px;"></div>
          <div class="obj-caisse" style="left:260px; bottom:25px;"></div>
          <div class="obj-plante-int" style="right:30px; bottom:25px;"></div>
          <div class="boutique-porte" style="bottom:-4px; left:220px;"></div>
        </div>
        <div class="boutique b-pharma" style="left:60px; top:550px; width:500px; height:350px;">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#128138;</div><div class="boutique-nom" style="font-size:16px;">PHARMACIE</div></div>
          <div class="obj-etagere" style="left:15px; top:20px; width:100px;"></div>
          <div class="obj-etagere" style="left:15px; top:55px; width:100px;"></div>
          <div class="obj-etagere" style="left:15px; top:90px; width:100px;"></div>
          <div class="obj-etagere" style="left:15px; top:125px; width:100px;"></div>
          <div class="obj-vitrine" style="right:30px; top:30px; width:80px; height:35px;"></div>
          <div class="obj-comptoir" style="left:180px; bottom:25px; width:180px;"></div>
          <div class="obj-caisse" style="left:310px; bottom:20px;"></div>
          <div class="obj-plante-int" style="right:20px; bottom:20px;"></div>
          <div class="boutique-porte" style="right:-4px; top:150px; width:8px; height:50px;"></div>
        </div>
        <div class="boutique b-livre" style="left:60px; top:1000px; width:500px; height:350px;">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#128218;</div><div class="boutique-nom" style="font-size:16px;">LIBRAIRIE</div></div>
          <div class="obj-etagere" style="left:10px; top:15px; width:120px;"></div>
          <div class="obj-etagere" style="left:10px; top:45px; width:120px;"></div>
          <div class="obj-etagere" style="left:10px; top:75px; width:120px;"></div>
          <div class="obj-etagere" style="right:15px; top:15px; width:100px;"></div>
          <div class="obj-etagere" style="right:15px; top:45px; width:100px;"></div>
          <div class="obj-table" style="left:200px; top:80px;"></div>
          <div class="obj-chaise" style="left:195px; top:65px;"></div>
          <div class="obj-chaise" style="left:230px; top:65px;"></div>
          <div class="obj-table" style="left:200px; top:180px;"></div>
          <div class="obj-chaise" style="left:195px; top:165px;"></div>
          <div class="obj-chaise" style="left:230px; top:165px;"></div>
          <div class="obj-comptoir" style="left:160px; bottom:20px; width:140px;"></div>
          <div class="obj-caisse" style="left:260px; bottom:15px;"></div>
          <div class="boutique-porte" style="right:-4px; top:150px; width:8px; height:50px;"></div>
        </div>
        <div class="boutique b-sport" style="left:60px; top:1450px; width:500px; height:400px;">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#127947;</div><div class="boutique-nom" style="font-size:16px;">SALLE DE SPORT</div></div>
          <div class="obj-machine" style="left:30px; top:40px;"></div>
          <div class="obj-machine" style="left:80px; top:40px;"></div>
          <div class="obj-machine" style="left:130px; top:40px;"></div>
          <div class="obj-miroir" style="right:12px; top:30px; height:60px; width:10px;"></div>
          <div class="obj-miroir" style="right:12px; top:110px; height:60px; width:10px;"></div>
          <div class="obj-comptoir" style="left:180px; bottom:25px; width:140px;"></div>
          <div class="obj-caisse" style="left:280px; bottom:20px;"></div>
          <div class="obj-plante-int" style="left:20px; bottom:20px;"></div>
          <div class="obj-plante-int" style="right:25px; bottom:20px;"></div>
          <div class="boutique-porte" style="right:-4px; top:180px; width:8px; height:50px;"></div>
        </div>

        <!-- ================================================ -->
        <!-- AILE NORD-EST (haut droite)                       -->
        <!-- ================================================ -->
        <div class="boutique b-bijoux" style="right:60px; top:60px; width:500px; height:400px;">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#128142;</div><div class="boutique-nom" style="font-size:16px;">BIJOUTERIE</div></div>
          <div class="obj-vitrine" style="left:30px; top:30px; width:90px; height:35px;"></div>
          <div class="obj-vitrine" style="left:30px; top:90px; width:90px; height:35px;"></div>
          <div class="obj-vitrine" style="right:30px; top:30px; width:90px; height:35px;"></div>
          <div class="obj-miroir" style="right:15px; top:90px; height:50px;"></div>
          <div class="obj-comptoir" style="left:160px; bottom:30px; width:180px;"></div>
          <div class="obj-caisse" style="left:290px; bottom:25px;"></div>
          <div class="obj-plante-int" style="left:20px; bottom:20px;"></div>
          <div class="boutique-porte" style="bottom:-4px; left:220px;"></div>
        </div>
        <div class="boutique b-techno" style="right:60px; top:550px; width:500px; height:350px;">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#128241;</div><div class="boutique-nom" style="font-size:16px;">TECH & ELECTRONIQUE</div></div>
          <div class="obj-table-rect" style="left:30px; top:30px;"></div>
          <div class="obj-table-rect" style="left:120px; top:30px;"></div>
          <div class="obj-table-rect" style="left:30px; top:120px;"></div>
          <div class="obj-ecran" style="right:20px; top:20px; width:60px; height:35px;"></div>
          <div class="obj-ecran" style="right:20px; top:75px; width:60px; height:35px;"></div>
          <div class="obj-etagere" style="right:15px; top:130px; width:90px;"></div>
          <div class="obj-etagere" style="right:15px; top:160px; width:90px;"></div>
          <div class="obj-comptoir" style="left:160px; bottom:20px; width:160px;"></div>
          <div class="obj-caisse" style="left:270px; bottom:15px;"></div>
          <div class="boutique-porte" style="left:-4px; top:150px; width:8px; height:50px;"></div>
        </div>
        <div class="boutique b-cinema" style="right:60px; top:1000px; width:500px; height:450px;">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#127916;</div><div class="boutique-nom" style="font-size:16px;">CINEMA MULTIPLEX</div></div>
          <div class="obj-ecran" style="left:50px; top:15px; width:400px; height:50px;"></div>
          <div class="obj-comptoir" style="left:80px; top:100px; width:340px; height:14px; background:#4e342e;"></div>
          <div class="obj-comptoir" style="left:80px; top:140px; width:340px; height:14px; background:#4e342e;"></div>
          <div class="obj-comptoir" style="left:80px; top:180px; width:340px; height:14px; background:#4e342e;"></div>
          <div class="obj-comptoir" style="left:80px; top:220px; width:340px; height:14px; background:#4e342e;"></div>
          <div class="obj-comptoir" style="right:20px; bottom:25px; width:120px; background:#ff9800; border-color:#f57c00;"></div>
          <div class="obj-caisse" style="right:25px; bottom:20px;"></div>
          <div class="boutique-porte" style="left:-4px; top:200px; width:8px; height:50px;"></div>
        </div>
        <div class="boutique b-resto" style="right:60px; top:1550px; width:500px; height:350px;">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#127860;</div><div class="boutique-nom" style="font-size:16px;">RESTAURANT</div></div>
          <div class="obj-table" style="left:40px; top:35px;"></div>
          <div class="obj-chaise" style="left:35px; top:20px;"></div>
          <div class="obj-chaise" style="left:70px; top:20px;"></div>
          <div class="obj-table" style="left:140px; top:35px;"></div>
          <div class="obj-chaise" style="left:135px; top:20px;"></div>
          <div class="obj-chaise" style="left:170px; top:20px;"></div>
          <div class="obj-table" style="left:40px; top:140px;"></div>
          <div class="obj-chaise" style="left:35px; top:125px;"></div>
          <div class="obj-chaise" style="left:70px; top:125px;"></div>
          <div class="obj-table" style="left:140px; top:140px;"></div>
          <div class="obj-chaise" style="left:135px; top:125px;"></div>
          <div class="obj-chaise" style="left:170px; top:125px;"></div>
          <div class="obj-table" style="right:80px; top:80px;"></div>
          <div class="obj-chaise" style="right:75px; top:65px;"></div>
          <div class="obj-chaise" style="right:110px; top:65px;"></div>
          <div class="obj-comptoir" style="right:15px; bottom:20px; width:200px; background:#ff9800; border-color:#f57c00;"></div>
          <div class="obj-caisse" style="right:170px; bottom:15px;"></div>
          <div class="obj-plante-int" style="left:20px; bottom:15px;"></div>
          <div class="boutique-porte" style="left:-4px; top:150px; width:8px; height:50px;"></div>
        </div>

        <!-- ================================================ -->
        <!-- AILE SUD-OUEST (bas gauche)                       -->
        <!-- ================================================ -->
        <div class="boutique b-super" style="left:60px; top:3200px; width:700px; height:500px;">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#128722;</div><div class="boutique-nom" style="font-size:16px;">SUPERMARCHE GEANT</div></div>
          <div class="obj-rayon" style="left:30px; top:40px;"></div>
          <div class="obj-rayon" style="left:30px; top:90px;"></div>
          <div class="obj-rayon" style="left:30px; top:140px;"></div>
          <div class="obj-rayon" style="left:30px; top:190px;"></div>
          <div class="obj-rayon" style="left:250px; top:40px;"></div>
          <div class="obj-rayon" style="left:250px; top:90px;"></div>
          <div class="obj-vitrine" style="left:30px; top:260px; width:140px; height:40px; background:rgba(33,150,243,0.15); border-color:#64b5f6;"></div>
          <div class="obj-caisse" style="right:40px; bottom:30px;"></div>
          <div class="obj-caisse" style="right:90px; bottom:30px;"></div>
          <div class="obj-comptoir" style="right:30px; bottom:25px; width:100px;"></div>
          <div class="obj-comptoir" style="right:30px; bottom:70px; width:100px;"></div>
          <div class="boutique-porte" style="right:-4px; top:220px; width:8px; height:50px;"></div>
          <div class="boutique-porte" style="top:-4px; left:300px;"></div>
        </div>
        <div class="boutique" style="left:60px; top:3800px; width:500px; height:350px; background:linear-gradient(135deg,#5c6bc0,#3949ab);">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#127918;</div><div class="boutique-nom" style="font-size:16px;">MAGASIN DE JEUX VIDEO</div></div>
          <div class="obj-etagere" style="left:15px; top:20px; width:100px;"></div>
          <div class="obj-etagere" style="left:15px; top:50px; width:100px;"></div>
          <div class="obj-etagere" style="left:15px; top:80px; width:100px;"></div>
          <div class="obj-ecran" style="right:20px; top:25px; width:55px; height:35px;"></div>
          <div class="obj-ecran" style="right:20px; top:80px; width:55px; height:35px;"></div>
          <div class="obj-comptoir" style="left:170px; bottom:20px; width:150px;"></div>
          <div class="obj-caisse" style="left:270px; bottom:15px;"></div>
          <div class="obj-plante-int" style="left:20px; bottom:15px;"></div>
          <div class="boutique-porte" style="right:-4px; top:150px; width:8px; height:50px;"></div>
        </div>
        <div class="boutique" style="left:60px; top:4250px; width:500px; height:350px; background:linear-gradient(135deg,#00897b,#00695c);">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#127808;</div><div class="boutique-nom" style="font-size:16px;">JARDINERIE</div></div>
          <div class="obj-table-rect" style="left:25px; top:25px; background:#4caf50; border-color:#388e3c;"></div>
          <div class="obj-table-rect" style="left:25px; top:85px; background:#4caf50; border-color:#388e3c;"></div>
          <div class="obj-table-rect" style="left:25px; top:145px; background:#4caf50; border-color:#388e3c;"></div>
          <div class="obj-table-rect" style="left:120px; top:25px; background:#4caf50; border-color:#388e3c;"></div>
          <div class="obj-etagere" style="right:20px; top:25px; width:90px;"></div>
          <div class="obj-etagere" style="right:20px; top:55px; width:90px;"></div>
          <div class="obj-comptoir" style="left:170px; bottom:20px; width:140px;"></div>
          <div class="obj-plante-int" style="left:20px; bottom:15px;"></div>
          <div class="obj-plante-int" style="right:20px; bottom:15px;"></div>
          <div class="obj-plante-int" style="left:100px; bottom:15px;"></div>
          <div class="boutique-porte" style="right:-4px; top:150px; width:8px; height:50px;"></div>
        </div>
        <div class="boutique" style="left:60px; top:4700px; width:500px; height:400px; background:linear-gradient(135deg,#6d4c41,#4e342e);">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#128186;</div><div class="boutique-nom" style="font-size:16px;">MEUBLES & DECO</div></div>
          <div class="obj-canape" style="left:25px; top:35px;"></div>
          <div class="obj-canape" style="left:25px; top:120px; background:#e91e63; border-color:#c2185b;"></div>
          <div class="obj-table" style="left:120px; top:40px;"></div>
          <div class="obj-table-rect" style="right:30px; top:35px; width:80px;"></div>
          <div class="obj-comptoir" style="left:170px; bottom:25px; width:160px;"></div>
          <div class="obj-plante-int" style="left:20px; bottom:20px;"></div>
          <div class="obj-plante-int" style="right:20px; bottom:20px;"></div>
          <div class="boutique-porte" style="right:-4px; top:180px; width:8px; height:50px;"></div>
        </div>
        <div class="boutique b-wc" style="left:60px; top:5200px; width:400px; height:280px;">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:50px;">&#128701;</div><div class="boutique-nom" style="font-size:16px;">TOILETTES SUD</div></div>
          <div class="obj-cabine" style="left:20px; top:20px;"></div>
          <div class="obj-cabine" style="left:75px; top:20px;"></div>
          <div class="obj-cabine" style="left:130px; top:20px;"></div>
          <div class="obj-lavabo" style="right:30px; top:25px;"></div>
          <div class="obj-lavabo" style="right:70px; top:25px;"></div>
          <div class="obj-miroir" style="right:15px; top:20px; height:35px;"></div>
          <div class="boutique-porte" style="right:-4px; top:120px; width:8px; height:50px;"></div>
        </div>

        <!-- ================================================ -->
        <!-- AILE SUD-EST (bas droite)                         -->
        <!-- ================================================ -->
        <div class="boutique b-food" style="right:60px; top:3200px; width:700px; height:500px;">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#127828;</div><div class="boutique-nom" style="font-size:16px;">FOOD COURT</div></div>
          <div class="obj-comptoir" style="left:20px; top:25px; width:140px; background:#ff9800; border-color:#f57c00;"></div>
          <div class="obj-comptoir" style="left:200px; top:25px; width:140px; background:#e53935; border-color:#c62828;"></div>
          <div class="obj-comptoir" style="left:380px; top:25px; width:140px; background:#43a047; border-color:#2e7d32;"></div>
          <div class="obj-table" style="left:40px; top:110px;"></div>
          <div class="obj-chaise" style="left:35px; top:95px;"></div>
          <div class="obj-chaise" style="left:70px; top:95px;"></div>
          <div class="obj-table" style="left:140px; top:110px;"></div>
          <div class="obj-chaise" style="left:135px; top:95px;"></div>
          <div class="obj-chaise" style="left:170px; top:95px;"></div>
          <div class="obj-table" style="left:240px; top:110px;"></div>
          <div class="obj-chaise" style="left:235px; top:95px;"></div>
          <div class="obj-chaise" style="left:270px; top:95px;"></div>
          <div class="obj-table" style="left:40px; top:220px;"></div>
          <div class="obj-chaise" style="left:35px; top:205px;"></div>
          <div class="obj-chaise" style="left:70px; top:205px;"></div>
          <div class="obj-table" style="left:140px; top:220px;"></div>
          <div class="obj-chaise" style="left:135px; top:205px;"></div>
          <div class="obj-chaise" style="left:170px; top:205px;"></div>
          <div class="obj-table" style="left:240px; top:220px;"></div>
          <div class="obj-chaise" style="left:235px; top:205px;"></div>
          <div class="obj-chaise" style="left:270px; top:205px;"></div>
          <div class="obj-plante-int" style="right:20px; bottom:20px;"></div>
          <div class="obj-plante-int" style="left:20px; bottom:20px;"></div>
          <div class="boutique-porte" style="left:-4px; top:220px; width:8px; height:50px;"></div>
          <div class="boutique-porte" style="top:-4px; left:300px;"></div>
        </div>
        <div class="boutique" style="right:60px; top:3800px; width:500px; height:350px; background:linear-gradient(135deg,#d84315,#bf360c);">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#127936;</div><div class="boutique-nom" style="font-size:16px;">ARTICLES DE SPORT</div></div>
          <div class="obj-etagere" style="left:15px; top:20px; width:100px;"></div>
          <div class="obj-etagere" style="left:15px; top:50px; width:100px;"></div>
          <div class="obj-etagere" style="left:15px; top:80px; width:100px;"></div>
          <div class="obj-portant" style="right:25px; top:30px; width:80px;"></div>
          <div class="obj-portant" style="right:25px; top:80px; width:80px;"></div>
          <div class="obj-comptoir" style="left:170px; bottom:20px; width:150px;"></div>
          <div class="obj-caisse" style="left:270px; bottom:15px;"></div>
          <div class="obj-plante-int" style="left:20px; bottom:15px;"></div>
          <div class="boutique-porte" style="left:-4px; top:150px; width:8px; height:50px;"></div>
        </div>
        <div class="boutique" style="right:60px; top:4250px; width:500px; height:350px; background:linear-gradient(135deg,#ad1457,#880e4f);">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#128132;</div><div class="boutique-nom" style="font-size:16px;">PARFUMERIE</div></div>
          <div class="obj-vitrine" style="left:25px; top:25px; width:80px; height:35px;"></div>
          <div class="obj-vitrine" style="left:25px; top:85px; width:80px; height:35px;"></div>
          <div class="obj-vitrine" style="right:25px; top:25px; width:80px; height:35px;"></div>
          <div class="obj-miroir" style="right:15px; top:80px; height:50px;"></div>
          <div class="obj-miroir" style="left:15px; top:140px; height:50px;"></div>
          <div class="obj-comptoir" style="left:170px; bottom:20px; width:150px;"></div>
          <div class="obj-caisse" style="left:270px; bottom:15px;"></div>
          <div class="obj-plante-int" style="left:20px; bottom:15px;"></div>
          <div class="boutique-porte" style="left:-4px; top:150px; width:8px; height:50px;"></div>
        </div>
        <div class="boutique" style="right:60px; top:4700px; width:500px; height:400px; background:linear-gradient(135deg,#0277bd,#01579b);">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#9992;</div><div class="boutique-nom" style="font-size:16px;">AGENCE DE VOYAGE</div></div>
          <div class="obj-table-rect" style="left:25px; top:30px;"></div>
          <div class="obj-chaise" style="left:45px; top:72px;"></div>
          <div class="obj-table-rect" style="left:25px; top:110px;"></div>
          <div class="obj-chaise" style="left:45px; top:152px;"></div>
          <div class="obj-table-rect" style="left:25px; top:190px;"></div>
          <div class="obj-chaise" style="left:45px; top:232px;"></div>
          <div class="obj-ecran" style="right:20px; top:30px; width:60px; height:40px;"></div>
          <div class="obj-comptoir" style="right:15px; bottom:25px; width:140px;"></div>
          <div class="obj-plante-int" style="left:20px; bottom:20px;"></div>
          <div class="obj-plante-int" style="right:20px; bottom:65px;"></div>
          <div class="boutique-porte" style="left:-4px; top:180px; width:8px; height:50px;"></div>
        </div>
        <div class="boutique b-wc" style="right:60px; top:5200px; width:400px; height:280px;">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:50px;">&#128701;</div><div class="boutique-nom" style="font-size:16px;">TOILETTES SUD-EST</div></div>
          <div class="obj-cabine" style="right:20px; top:20px;"></div>
          <div class="obj-cabine" style="right:75px; top:20px;"></div>
          <div class="obj-cabine" style="right:130px; top:20px;"></div>
          <div class="obj-lavabo" style="left:30px; top:25px;"></div>
          <div class="obj-lavabo" style="left:70px; top:25px;"></div>
          <div class="obj-miroir" style="left:15px; top:20px; height:35px;"></div>
          <div class="boutique-porte" style="left:-4px; top:120px; width:8px; height:50px;"></div>
        </div>

        <!-- ================================================ -->
        <!-- ZONE CENTRALE - HAUT                              -->
        <!-- ================================================ -->
        <div class="boutique b-secu" style="left:2800px; top:60px; width:450px; height:300px;">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#128225;</div><div class="boutique-nom" style="font-size:16px;">POSTE DE SECURITE</div></div>
          <div class="obj-table-rect" style="left:30px; top:40px;"></div>
          <div class="obj-chaise" style="left:55px; top:80px;"></div>
          <div class="obj-table-rect" style="left:30px; top:140px;"></div>
          <div class="obj-chaise" style="left:55px; top:180px;"></div>
          <div class="obj-ecran" style="right:30px; top:25px;"></div>
          <div class="obj-ecran" style="right:30px; top:80px;"></div>
          <div class="obj-ecran" style="right:30px; top:135px;"></div>
          <div class="obj-comptoir" style="left:160px; bottom:30px; width:140px;"></div>
          <div class="obj-caisse" style="left:260px; bottom:25px;"></div>
          <div class="boutique-porte" style="bottom:-4px; left:200px;"></div>
        </div>
        <div class="boutique b-wc" style="left:3350px; top:60px; width:350px; height:250px;">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:50px;">&#128701;</div><div class="boutique-nom" style="font-size:16px;">TOILETTES NORD</div></div>
          <div class="obj-cabine" style="right:25px; top:20px;"></div>
          <div class="obj-cabine" style="right:25px; top:80px;"></div>
          <div class="obj-cabine" style="right:25px; top:140px;"></div>
          <div class="obj-lavabo" style="left:25px; top:40px;"></div>
          <div class="obj-lavabo" style="left:25px; top:90px;"></div>
          <div class="obj-miroir" style="left:15px; top:35px; height:35px;"></div>
          <div class="obj-caisse" style="left:160px; bottom:20px;"></div>
          <div class="boutique-porte" style="bottom:-4px; left:150px;"></div>
        </div>
        <div class="boutique" style="left:3800px; top:60px; width:450px; height:300px; background:linear-gradient(135deg,#78909c,#546e7a);">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#127863;</div><div class="boutique-nom" style="font-size:16px;">CAFE DU CENTRE</div></div>
          <div class="obj-comptoir" style="left:20px; top:30px; width:140px; height:22px; background:#4e342e;"></div>
          <div class="obj-caisse" style="left:25px; top:60px;"></div>
          <div class="obj-table" style="left:200px; top:30px;"></div>
          <div class="obj-chaise" style="left:195px; top:18px;"></div>
          <div class="obj-chaise" style="left:225px; top:18px;"></div>
          <div class="obj-chaise" style="left:195px; top:72px;"></div>
          <div class="obj-chaise" style="left:225px; top:72px;"></div>
          <div class="obj-table" style="right:60px; top:30px;"></div>
          <div class="obj-chaise" style="right:55px; top:18px;"></div>
          <div class="obj-chaise" style="right:85px; top:18px;"></div>
          <div class="obj-chaise" style="right:55px; top:72px;"></div>
          <div class="obj-chaise" style="right:85px; top:72px;"></div>
          <div class="obj-table" style="left:200px; top:160px;"></div>
          <div class="obj-chaise" style="left:195px; top:148px;"></div>
          <div class="obj-chaise" style="left:225px; top:148px;"></div>
          <div class="obj-chaise" style="left:195px; top:202px;"></div>
          <div class="obj-chaise" style="left:225px; top:202px;"></div>
          <div class="obj-table" style="right:60px; top:160px;"></div>
          <div class="obj-chaise" style="right:55px; top:148px;"></div>
          <div class="obj-chaise" style="right:85px; top:148px;"></div>
          <div class="obj-chaise" style="right:55px; top:202px;"></div>
          <div class="obj-chaise" style="right:85px; top:202px;"></div>
          <div class="obj-plante-int" style="left:170px; top:240px;"></div>
          <div class="obj-plante-int" style="right:30px; top:240px;"></div>
          <div class="boutique-porte" style="bottom:-4px; left:200px;"></div>
        </div>

        <!-- ================================================ -->
        <!-- ILOTS CENTRAUX                                    -->
        <!-- ================================================ -->

        <!-- Ilot 1 - Kiosque -->
        <div class="boutique" style="left:2500px; top:1200px; width:600px; height:350px; background:linear-gradient(135deg,#78909c,#546e7a);">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#128240;</div><div class="boutique-nom" style="font-size:16px;">KIOSQUE A JOURNAUX</div></div>
          <div class="obj-etagere" style="left:20px; top:20px; width:120px;"></div>
          <div class="obj-etagere" style="left:20px; top:50px; width:120px;"></div>
          <div class="obj-etagere" style="right:20px; top:20px; width:120px;"></div>
          <div class="obj-etagere" style="right:20px; top:50px; width:120px;"></div>
          <div class="obj-etagere" style="left:20px; top:200px; width:100px;"></div>
          <div class="obj-etagere" style="right:20px; top:200px; width:100px;"></div>
          <div class="obj-comptoir" style="left:240px; bottom:40px; width:130px;"></div>
          <div class="obj-caisse" style="left:275px; bottom:65px;"></div>
          <div class="boutique-porte" style="bottom:-4px; left:280px;"></div>
          <div class="boutique-porte" style="left:-4px; top:150px; width:8px; height:50px;"></div>
          <div class="boutique-porte" style="right:-4px; top:150px; width:8px; height:50px;"></div>
        </div>

        <!-- Ilot 2 - Opticien -->
        <div class="boutique" style="left:4500px; top:1200px; width:600px; height:350px; background:linear-gradient(135deg,#5c6bc0,#3f51b5);">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#128083;</div><div class="boutique-nom" style="font-size:16px;">OPTICIEN</div></div>
          <div class="obj-vitrine" style="left:20px; top:25px; width:100px; height:40px;"></div>
          <div class="obj-vitrine" style="left:20px; top:90px; width:100px; height:40px;"></div>
          <div class="obj-vitrine" style="right:20px; top:25px; width:100px; height:40px;"></div>
          <div class="obj-miroir" style="right:15px; top:90px; height:40px;"></div>
          <div class="obj-comptoir" style="left:240px; bottom:40px; width:130px;"></div>
          <div class="obj-caisse" style="left:275px; bottom:65px;"></div>
          <div class="obj-chaise" style="left:180px; top:80px;"></div>
          <div class="obj-plante-int" style="left:150px; top:20px;"></div>
          <div class="boutique-porte" style="bottom:-4px; left:280px;"></div>
          <div class="boutique-porte" style="left:-4px; top:150px; width:8px; height:50px;"></div>
          <div class="boutique-porte" style="right:-4px; top:150px; width:8px; height:50px;"></div>
        </div>

        <!-- Fontaine centrale GRANDE -->
        <div class="mall-fontaine" style="left:3700px; top:2700px; width:200px; height:200px;">
          <span class="fontaine-label">FONTAINE CENTRALE</span>
        </div>

        <!-- Ilot 3 - Salle d'arcade -->
        <div class="boutique" style="left:2500px; top:3800px; width:600px; height:400px; background:linear-gradient(135deg,#78909c,#546e7a);">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#127922;</div><div class="boutique-nom" style="font-size:16px;">SALLE D'ARCADE</div></div>
          <div class="obj-machine" style="left:30px; top:30px;"></div>
          <div class="obj-machine" style="left:80px; top:30px;"></div>
          <div class="obj-machine" style="left:130px; top:30px;"></div>
          <div class="obj-machine" style="right:80px; top:30px;"></div>
          <div class="obj-machine" style="right:30px; top:30px;"></div>
          <div class="obj-machine" style="left:30px; top:180px;"></div>
          <div class="obj-machine" style="left:80px; top:180px;"></div>
          <div class="obj-comptoir" style="right:30px; bottom:40px; width:150px;"></div>
          <div class="obj-caisse" style="right:60px; bottom:65px;"></div>
          <div class="boutique-porte" style="top:-4px; left:280px;"></div>
          <div class="boutique-porte" style="left:-4px; top:180px; width:8px; height:50px;"></div>
          <div class="boutique-porte" style="right:-4px; top:180px; width:8px; height:50px;"></div>
        </div>

        <!-- Ilot 4 - Bowling -->
        <div class="boutique" style="left:4500px; top:3800px; width:600px; height:400px; background:linear-gradient(135deg,#e65100,#bf360c);">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#127923;</div><div class="boutique-nom" style="font-size:16px;">BOWLING</div></div>
          <div class="obj-piste" style="left:30px; top:60px;"></div>
          <div class="obj-piste" style="left:30px; top:140px;"></div>
          <div class="obj-piste" style="left:30px; top:220px;"></div>
          <div class="obj-comptoir" style="right:30px; bottom:40px; width:140px; background:#5d4037;"></div>
          <div class="obj-caisse" style="right:60px; bottom:65px;"></div>
          <div class="obj-canape" style="right:30px; top:40px;"></div>
          <div class="obj-canape" style="right:30px; top:120px;"></div>
          <div class="boutique-porte" style="top:-4px; left:280px;"></div>
        </div>

        <!-- ================================================ -->
        <!-- AILE GAUCHE CENTRE (milieu gauche)                -->
        <!-- ================================================ -->
        <div class="boutique" style="left:60px; top:2100px; width:500px; height:400px; background:linear-gradient(135deg,#f9a825,#f57f17);">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#128058;</div><div class="boutique-nom" style="font-size:16px;">ANIMALERIE</div></div>
          <div class="obj-vitrine" style="left:20px; top:25px; width:100px; height:50px; background:rgba(33,150,243,0.2); border-color:#42a5f5;"></div>
          <div class="obj-vitrine" style="left:20px; top:100px; width:80px; height:50px;"></div>
          <div class="obj-vitrine" style="left:20px; top:175px; width:80px; height:50px;"></div>
          <div class="obj-etagere" style="right:20px; top:30px; width:100px;"></div>
          <div class="obj-etagere" style="right:20px; top:60px; width:100px;"></div>
          <div class="obj-comptoir" style="left:180px; bottom:25px; width:150px;"></div>
          <div class="obj-caisse" style="left:280px; bottom:20px;"></div>
          <div class="obj-plante-int" style="left:30px; bottom:20px;"></div>
          <div class="obj-plante-int" style="right:30px; bottom:20px;"></div>
          <div class="boutique-porte" style="right:-4px; top:180px; width:8px; height:50px;"></div>
        </div>
        <div class="boutique" style="left:60px; top:2600px; width:500px; height:400px; background:linear-gradient(135deg,#ec407a,#c2185b);">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#127874;</div><div class="boutique-nom" style="font-size:16px;">PATISSERIE</div></div>
          <div class="obj-vitrine" style="left:20px; top:25px; width:100px; height:40px;"></div>
          <div class="obj-vitrine" style="left:20px; top:85px; width:100px; height:40px;"></div>
          <div class="obj-comptoir" style="right:15px; bottom:25px; width:180px; background:#ff9800; border-color:#f57c00;"></div>
          <div class="obj-caisse" style="right:150px; bottom:20px;"></div>
          <div class="obj-table" style="left:200px; top:40px;"></div>
          <div class="obj-chaise" style="left:195px; top:25px;"></div>
          <div class="obj-chaise" style="left:230px; top:25px;"></div>
          <div class="obj-table" style="left:200px; top:130px;"></div>
          <div class="obj-chaise" style="left:195px; top:115px;"></div>
          <div class="obj-chaise" style="left:230px; top:115px;"></div>
          <div class="obj-table" style="left:300px; top:40px;"></div>
          <div class="obj-chaise" style="left:295px; top:25px;"></div>
          <div class="obj-chaise" style="left:330px; top:25px;"></div>
          <div class="obj-plante-int" style="left:20px; bottom:15px;"></div>
          <div class="boutique-porte" style="right:-4px; top:180px; width:8px; height:50px;"></div>
        </div>

        <!-- ================================================ -->
        <!-- AILE DROITE CENTRE (milieu droite)                -->
        <!-- ================================================ -->
        <div class="boutique" style="right:60px; top:2100px; width:500px; height:400px; background:linear-gradient(135deg,#7cb342,#558b2f);">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#127811;</div><div class="boutique-nom" style="font-size:16px;">BIO & NATURE</div></div>
          <div class="obj-etagere" style="left:20px; top:25px; width:110px;"></div>
          <div class="obj-etagere" style="left:20px; top:55px; width:110px;"></div>
          <div class="obj-etagere" style="left:20px; top:85px; width:110px;"></div>
          <div class="obj-etagere" style="left:20px; top:115px; width:110px;"></div>
          <div class="obj-table-rect" style="right:30px; top:40px;"></div>
          <div class="obj-table-rect" style="right:30px; top:110px;"></div>
          <div class="obj-comptoir" style="left:180px; bottom:25px; width:160px;"></div>
          <div class="obj-caisse" style="left:290px; bottom:20px;"></div>
          <div class="obj-plante-int" style="left:25px; bottom:20px;"></div>
          <div class="obj-plante-int" style="right:25px; bottom:20px;"></div>
          <div class="boutique-porte" style="left:-4px; top:180px; width:8px; height:50px;"></div>
        </div>
        <div class="boutique" style="right:60px; top:2600px; width:500px; height:400px; background:linear-gradient(135deg,#8d6e63,#5d4037);">
          <div class="boutique-interieur"><div class="boutique-icone" style="font-size:60px;">&#9749;</div><div class="boutique-nom" style="font-size:16px;">SALON DE THE</div></div>
          <div class="obj-table" style="left:30px; top:35px;"></div>
          <div class="obj-chaise" style="left:25px; top:20px;"></div>
          <div class="obj-chaise" style="left:60px; top:20px;"></div>
          <div class="obj-table" style="left:130px; top:35px;"></div>
          <div class="obj-chaise" style="left:125px; top:20px;"></div>
          <div class="obj-chaise" style="left:160px; top:20px;"></div>
          <div class="obj-table" style="left:30px; top:140px;"></div>
          <div class="obj-chaise" style="left:25px; top:125px;"></div>
          <div class="obj-chaise" style="left:60px; top:125px;"></div>
          <div class="obj-table" style="left:130px; top:140px;"></div>
          <div class="obj-chaise" style="left:125px; top:125px;"></div>
          <div class="obj-chaise" style="left:160px; top:125px;"></div>
          <div class="obj-comptoir" style="right:15px; top:25px; width:140px; height:22px; background:#a1887f; border-color:#8d6e63;"></div>
          <div class="obj-caisse" style="right:115px; top:20px;"></div>
          <div class="obj-plante-int" style="right:20px; bottom:20px;"></div>
          <div class="obj-plante-int" style="left:20px; bottom:20px;"></div>
          <div class="boutique-porte" style="left:-4px; top:180px; width:8px; height:50px;"></div>
        </div>

        <!-- ================================================ -->
        <!-- DECORATIONS                                       -->
        <!-- ================================================ -->

        <!-- Bancs autour fontaine -->
        <div class="banc" style="left:3600px; top:2650px;"></div>
        <div class="banc" style="left:3950px; top:2650px;"></div>
        <div class="banc" style="left:3600px; top:2950px;"></div>
        <div class="banc" style="left:3950px; top:2950px;"></div>

        <!-- Bancs corridors -->
        <div class="banc" style="left:800px; top:500px;"></div>
        <div class="banc" style="left:800px; top:1400px;"></div>
        <div class="banc" style="left:800px; top:2500px;"></div>
        <div class="banc" style="left:800px; top:3600px;"></div>
        <div class="banc" style="left:800px; top:4600px;"></div>
        <div class="banc" style="left:6700px; top:500px;"></div>
        <div class="banc" style="left:6700px; top:1400px;"></div>
        <div class="banc" style="left:6700px; top:2500px;"></div>
        <div class="banc" style="left:6700px; top:3600px;"></div>
        <div class="banc" style="left:6700px; top:4600px;"></div>
        <div class="banc" style="left:2000px; top:700px;"></div>
        <div class="banc" style="left:5500px; top:700px;"></div>
        <div class="banc" style="left:2000px; top:5200px;"></div>
        <div class="banc" style="left:5500px; top:5200px;"></div>

        <!-- Plantes decoratives -->
        <div class="mall-plante" style="left:700px; top:70px;"></div>
        <div class="mall-plante" style="left:700px; top:950px;"></div>
        <div class="mall-plante" style="left:700px; top:1900px;"></div>
        <div class="mall-plante" style="left:700px; top:3100px;"></div>
        <div class="mall-plante" style="left:700px; top:4200px;"></div>
        <div class="mall-plante" style="left:700px; top:5100px;"></div>
        <div class="mall-plante" style="left:7200px; top:70px;"></div>
        <div class="mall-plante" style="left:7200px; top:950px;"></div>
        <div class="mall-plante" style="left:7200px; top:1900px;"></div>
        <div class="mall-plante" style="left:7200px; top:3100px;"></div>
        <div class="mall-plante" style="left:7200px; top:4200px;"></div>
        <div class="mall-plante" style="left:7200px; top:5100px;"></div>
        <div class="mall-plante" style="left:3500px; top:2650px;"></div>
        <div class="mall-plante" style="left:4100px; top:2650px;"></div>
        <div class="mall-plante" style="left:3500px; top:2950px;"></div>
        <div class="mall-plante" style="left:4100px; top:2950px;"></div>
        <div class="mall-plante" style="left:2000px; top:2000px;"></div>
        <div class="mall-plante" style="left:5600px; top:2000px;"></div>
        <div class="mall-plante" style="left:2000px; top:3500px;"></div>
        <div class="mall-plante" style="left:5600px; top:3500px;"></div>

        <!-- Escalators -->
        <div class="escalator" style="left:1800px; top:60px;"><span>ESCALATOR</span></div>
        <div class="escalator" style="left:5800px; top:60px;"><span>ESCALATOR</span></div>
        <div class="escalator" style="left:1800px; top:5920px;"><span>ESCALATOR</span></div>
        <div class="escalator" style="left:5800px; top:5920px;"><span>ESCALATOR</span></div>
        <div class="escalator" style="left:3700px; top:2000px;"><span>ESCALATOR</span></div>
        <div class="escalator" style="left:3700px; top:4500px;"><span>ESCALATOR</span></div>

        <!-- Bouches d'aeration (vents) -->
        <div class="vent" style="left:580px; top:1900px;" title="Ventilation"></div>
        <div class="vent" style="left:7350px; top:1900px;" title="Ventilation"></div>
        <div class="vent" style="left:580px; top:4100px;" title="Ventilation"></div>
        <div class="vent" style="left:7350px; top:4100px;" title="Ventilation"></div>
        <div class="vent" style="left:3800px; top:600px;" title="Ventilation"></div>
        <div class="vent" style="left:3800px; top:5300px;" title="Ventilation"></div>
        <div class="vent" style="left:2200px; top:2800px;" title="Ventilation"></div>
        <div class="vent" style="left:5400px; top:2800px;" title="Ventilation"></div>

        <!-- Panneaux directionnels -->
        <div class="panneau-boutique" style="left:900px; top:470px;"><span>&#8592; BOUTIQUES NORD</span></div>
        <div class="panneau-boutique" style="left:6500px; top:470px;"><span>BOUTIQUES NORD &#8594;</span></div>
        <div class="panneau-boutique" style="left:900px; top:3100px;"><span>&#8592; BOUTIQUES SUD</span></div>
        <div class="panneau-boutique" style="left:6500px; top:3100px;"><span>BOUTIQUES SUD &#8594;</span></div>
        <div class="panneau-boutique" style="left:3600px; top:2400px;"><span>&#9660; FONTAINE CENTRALE</span></div>
        <div class="panneau-boutique" style="left:3600px; top:1800px;"><span>&#9650; SECURITE / CAFE</span></div>
        <div class="panneau-boutique" style="left:2100px; top:2800px;"><span>&#8592; ANIMALERIE / PATISSERIE</span></div>
        <div class="panneau-boutique" style="left:5200px; top:2800px;"><span>BIO / SALON DE THE &#8594;</span></div>

        <!-- Allees principales visibles -->
        <div class="mall-allee-h" style="left:100px; top:2700px; width:7800px; height:200px;"></div>
        <div class="mall-allee-v" style="left:3700px; top:100px; width:200px; height:5800px;"></div>
        <div class="mall-allee-h" style="left:100px; top:1300px; width:3500px; height:100px;"></div>
        <div class="mall-allee-h" style="left:4000px; top:1300px; width:3900px; height:100px;"></div>
        <div class="mall-allee-h" style="left:100px; top:4300px; width:3500px; height:100px;"></div>
        <div class="mall-allee-h" style="left:4000px; top:4300px; width:3900px; height:100px;"></div>

        <!-- Distributeurs automatiques -->
        <div class="mall-distributeur" style="left:1200px; top:1320px;"></div>
        <div class="mall-distributeur" style="left:6200px; top:1320px;"></div>
        <div class="mall-distributeur" style="left:1200px; top:4310px;"></div>
        <div class="mall-distributeur" style="left:6200px; top:4310px;"></div>
        <div class="mall-distributeur" style="left:3300px; top:2710px;"></div>
        <div class="mall-distributeur" style="left:4300px; top:2710px;"></div>

        <!-- Poubelles -->
        <div class="mall-poubelle" style="left:750px; top:100px;"></div>
        <div class="mall-poubelle" style="left:750px; top:980px;"></div>
        <div class="mall-poubelle" style="left:750px; top:1930px;"></div>
        <div class="mall-poubelle" style="left:7250px; top:100px;"></div>
        <div class="mall-poubelle" style="left:7250px; top:980px;"></div>
        <div class="mall-poubelle" style="left:7250px; top:1930px;"></div>
        <div class="mall-poubelle" style="left:3550px; top:2650px;"></div>
        <div class="mall-poubelle" style="left:4150px; top:2650px;"></div>

        <!-- Panneaux publicitaires lumineux -->
        <div class="mall-pub" style="left:1500px; top:50px;">SOLDES -50%</div>
        <div class="mall-pub" style="left:5800px; top:50px;">NOUVEAU MAGASIN</div>
        <div class="mall-pub" style="left:1500px; top:5920px;">HAPPY HOUR 18H</div>
        <div class="mall-pub" style="left:5800px; top:5920px;">OUVERT 7J/7</div>

        <!-- Tapis rouge entree sud -->
        <div class="mall-tapis" style="left:3700px; top:5750px; width:200px; height:200px;"></div>

        <!-- Fleches directionnelles au sol -->
        <div class="mall-fleche" style="left:3780px; top:5500px;">&#9650;</div>
        <div class="mall-fleche" style="left:3780px; top:400px;">&#9660;</div>
        <div class="mall-fleche" style="left:1600px; top:2780px;">&#9654;</div>
        <div class="mall-fleche" style="left:5800px; top:2780px;">&#9664;</div>
        <div class="mall-fleche" style="left:3780px; top:2100px;">&#9660;</div>
        <div class="mall-fleche" style="left:3780px; top:3500px;">&#9650;</div>

        <!-- JOUEUR (spawn au sud) -->
        <div class="joueur-perso" id="joueur" style="left:3800px; top:3050px;">
          <span class="joueur-pseudo" id="joueur-pseudo-label"></span>
          <img id="joueur-skin-img" src="skin/gratuit/skin-de-base-garcon.svg" alt="skin">
        </div>

      </div>
    </div>

    <!-- HUD (interface en jeu) -->
    <div class="jeu-hud">
      <div class="hud-top">
        <span style="font-weight:bold; color:#e74c3c; letter-spacing:2px;">VIRUS</span>
        <span>|</span>
        <span class="hud-role" id="hud-role">INNOCENT</span>
      </div>

      <div class="hud-missions">
        <h4>MISSIONS</h4>
        <div id="missions-liste"></div>
        <div class="mission-jauge-container" id="mission-jauge" style="display:none;">
          <div class="mission-jauge-fill" id="mission-jauge-fill"></div>
          <div class="mission-jauge-text" id="mission-jauge-text">0%</div>
        </div>
      </div>

      <button class="hud-btn-quitter" onclick="quitterJeu()" data-i18n="quit">QUITTER</button>

      <button class="btn-reunion" id="btn-reunion" onclick="demanderReunion()" data-i18n="callMeeting">APPELER UNE REUNION</button>
      <button class="btn-mission" id="btn-mission" onclick="faireMission()" data-i18n="doTask">FAIRE LA TACHE</button>
      <button class="btn-kill" id="btn-kill" onclick="tuerVictime()" data-i18n="kill">KILL</button>
      <div class="kill-countdown" id="kill-countdown">7</div>
      <button class="btn-signaler" id="btn-signaler" onclick="signalerCadavre()" data-i18n="report">SIGNALER</button>
      <button class="btn-enqueter" id="btn-enqueter" onclick="enqueterCible()" data-i18n="investigate">ENQUETER</button>
      <button class="btn-cameras" id="btn-cameras" onclick="ouvrirCameras()" data-i18n="cameras">CAMERAS</button>

      <!-- Joystick mobile -->
      <div id="joystick-container">
        <div id="joystick-base">
          <div id="joystick-stick"></div>
        </div>
      </div>

      <!-- Overlay cameras de securite -->
      <div class="cameras-overlay" id="cameras-overlay">
        <div class="cameras-titre" data-i18n="securityCams">CAMERAS DE SECURITE</div>
        <div class="cameras-grille" id="cameras-grille"></div>
        <button class="cameras-fermer" onclick="fermerCameras()" data-i18n="close">FERMER</button>
      </div>

      <!-- Overlay mini-jeux -->
      <div class="minijeu-overlay" id="minijeu-overlay">
        <div class="minijeu-titre" id="minijeu-titre"></div>
        <div class="minijeu-zone" id="minijeu-zone"></div>
      </div>

      <!-- Popup pouvoir journaliste -->
      <div class="journaliste-popup" id="popup-journaliste">
        <div class="journaliste-box">
          <div class="journaliste-titre">POUVOIR DU JOURNALISTE</div>
          <div class="journaliste-desc">
            Combien de virus penses-tu qu'il y a parmi les joueurs ?<br>
            <small>Choisis un nombre, et les roles te seront reveles.</small>
          </div>
          <div class="journaliste-choix" id="journaliste-choix"></div>
          <div class="journaliste-resultats" id="journaliste-resultats"></div>
          <button class="journaliste-fermer" id="journaliste-fermer" onclick="fermerPouvoirJournaliste()" data-i18n="gotIt">COMPRIS</button>
        </div>
      </div>

      <!-- Reunion HUD elements -->
      <div class="reunion-bandeau" id="reunion-bandeau">
        <div class="reunion-bandeau-titre" data-i18n="emergencyMeeting">REUNION D'URGENCE</div>
        <div class="reunion-bandeau-timer" id="reunion-timer">60</div>
      </div>

      <button class="chat-toggle-btn" id="reunion-chat-toggle" onclick="toggleChat('reunion')">&#128172;</button>
      <div class="reunion-chat" id="reunion-chat">
        <div class="reunion-chat-header"><h4>CHAT</h4></div>
        <div class="reunion-chat-messages" id="reunion-chat-messages"></div>
        <div class="reunion-chat-input">
          <input type="text" id="reunion-chat-input" placeholder="Discutez ici..." onkeydown="if(event.key==='Enter')envoyerMsgReunion()" data-i18n="phChatReunion" data-i18n-attr="placeholder">
          <button onclick="envoyerMsgReunion()">&#9654;</button>
        </div>
      </div>

      <button class="reunion-btn-skip" id="reunion-btn-skip" onclick="skipVote()" data-i18n="skip">SKIP</button>

      <div class="reunion-resultat-bandeau" id="reunion-resultat">
        <div class="reunion-resultat-texte" id="reunion-resultat-texte"></div>
        <div class="reunion-resultat-role" id="reunion-resultat-role"></div>
        <button class="reunion-btn-continuer" onclick="fermerReunion()" data-i18n="cont">CONTINUER</button>
      </div>

      <!-- Popup vote reunion (multiplayer) -->
      <div class="popup-reunion" id="popup-reunion" style="display:none;">
        <div class="popup-reunion-titre" data-i18n="emergencyMeeting">REUNION D'URGENCE</div>
        <div class="reunion-vote-info" id="reunion-vote-info">0/0</div>
        <div class="reunion-vote-liste" id="reunion-vote-liste"></div>
      </div>

      <!-- FIN DE PARTIE -->
      <div class="fin-partie-overlay" id="fin-partie-overlay">
        <div class="fin-partie-titre" id="fin-partie-titre">VICTOIRE DES VIRUS</div>
        <div class="fin-partie-sous-titre" id="fin-partie-sous-titre"></div>
        <div class="fin-partie-roles" id="fin-partie-roles"></div>
        <button class="fin-partie-btn" onclick="retourMenuFinPartie()" data-i18n="mainMenu">MENU PRINCIPAL</button>
      </div>

      <div class="hud-minimap">
        <div class="minimap-inner">
          <!-- AILE NORD-OUEST -->
          <div class="minimap-shop" style="left:0.6%; top:0.8%; width:6.3%; height:6.7%;"></div>
          <div class="minimap-shop" style="left:0.6%; top:9.2%; width:6.3%; height:5.8%;"></div>
          <div class="minimap-shop" style="left:0.6%; top:16.7%; width:6.3%; height:5.8%;"></div>
          <div class="minimap-shop" style="left:0.6%; top:24.2%; width:6.3%; height:6.7%;"></div>
          <!-- AILE GAUCHE CENTRE -->
          <div class="minimap-shop" style="left:0.6%; top:35%; width:6.3%; height:6.7%;"></div>
          <div class="minimap-shop" style="left:0.6%; top:43.3%; width:6.3%; height:6.7%;"></div>
          <!-- AILE SUD-OUEST -->
          <div class="minimap-shop" style="left:0.6%; top:53.3%; width:8.8%; height:8.3%;"></div>
          <div class="minimap-shop" style="left:0.6%; top:63.3%; width:6.3%; height:5.8%;"></div>
          <div class="minimap-shop" style="left:0.6%; top:70.8%; width:6.3%; height:5.8%;"></div>
          <div class="minimap-shop" style="left:0.6%; top:78.3%; width:6.3%; height:6.7%;"></div>
          <div class="minimap-shop" style="left:0.6%; top:86.7%; width:5%; height:5%;"></div>
          <!-- AILE NORD-EST -->
          <div class="minimap-shop" style="right:0.6%; top:0.8%; width:6.3%; height:6.7%;"></div>
          <div class="minimap-shop" style="right:0.6%; top:9.2%; width:6.3%; height:5.8%;"></div>
          <div class="minimap-shop" style="right:0.6%; top:16.7%; width:6.3%; height:7.5%;"></div>
          <div class="minimap-shop" style="right:0.6%; top:25.8%; width:6.3%; height:5.8%;"></div>
          <!-- AILE DROITE CENTRE -->
          <div class="minimap-shop" style="right:0.6%; top:35%; width:6.3%; height:6.7%;"></div>
          <div class="minimap-shop" style="right:0.6%; top:43.3%; width:6.3%; height:6.7%;"></div>
          <!-- AILE SUD-EST -->
          <div class="minimap-shop" style="right:0.6%; top:53.3%; width:8.8%; height:8.3%;"></div>
          <div class="minimap-shop" style="right:0.6%; top:63.3%; width:6.3%; height:5.8%;"></div>
          <div class="minimap-shop" style="right:0.6%; top:70.8%; width:6.3%; height:5.8%;"></div>
          <div class="minimap-shop" style="right:0.6%; top:78.3%; width:6.3%; height:6.7%;"></div>
          <div class="minimap-shop" style="right:0.6%; top:86.7%; width:5%; height:5%;"></div>
          <!-- ZONE CENTRALE HAUT -->
          <div class="minimap-shop" style="left:35%; top:0.8%; width:5.6%; height:5%;"></div>
          <div class="minimap-shop" style="left:41.9%; top:0.8%; width:4.4%; height:4.2%;"></div>
          <div class="minimap-shop" style="left:47.5%; top:0.8%; width:5.6%; height:5%;"></div>
          <!-- ILOTS CENTRAUX -->
          <div class="minimap-shop" style="left:31.3%; top:20%; width:7.5%; height:5.8%;"></div>
          <div class="minimap-shop" style="left:56.3%; top:20%; width:7.5%; height:5.8%;"></div>
          <div class="minimap-shop" style="left:31.3%; top:63.3%; width:7.5%; height:6.7%;"></div>
          <div class="minimap-shop" style="left:56.3%; top:63.3%; width:7.5%; height:6.7%;"></div>
          <!-- Fontaine minimap -->
          <div style="position:absolute; left:46.3%; top:45%; width:2.5%; height:3.3%; border-radius:50%; background:#4fc3f7; opacity:0.6;"></div>
          <!-- Joueur minimap -->
          <div class="minimap-joueur" id="minimap-point" style="left:48%; top:93%;"></div>
        </div>
      </div>

      <div class="hud-controles" data-i18n="hudControls">ZQSD ou Fleches pour se deplacer</div>
    </div>
  </div>

<!-- ============================== -->
<!-- OVERLAY CHOIX DE CAMP ESPION -->
<!-- ============================== -->
<div id="espion-choix-overlay">
  <h2 data-i18n="spyChooseTitle">TU ES L'ESPION</h2>
  <p data-i18n="spyChooseDesc">Choisis ton camp ! Tu gagneras avec le camp que tu choisis.</p>
  <div>
    <button class="espion-btn-camp espion-btn-innocent" onclick="choisirCampEspion('innocent')" data-i18n="spyBtnInnocent">INNOCENT</button>
    <button class="espion-btn-camp espion-btn-virus" onclick="choisirCampEspion('virus')" data-i18n="spyBtnVirus">VIRUS</button>
  </div>
</div>

<!-- ============================== -->
<!-- BOUTON AMIS (toujours visible sauf hors ligne) -->
<!-- ============================== -->
<div id="btn-amis" onclick="togglePanelAmis()" style="display:none;">
  <svg viewBox="0 0 24 24" fill="none" stroke="#ecf0f1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
    <circle cx="9" cy="7" r="4"/>
    <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
  </svg>
  <span id="badge-amis" style="display:none;">0</span>
</div>

<!-- ============================== -->
<!-- PANNEAU AMIS (1/4 ecran droite) -->
<!-- ============================== -->
<div id="panel-amis" class="panel-amis-ferme">
  <div class="panel-amis-header">
    <span data-i18n="friends">AMIS</span>
    <button onclick="togglePanelAmis()">&#10005;</button>
  </div>
  <div class="panel-amis-recherche">
    <input id="input-recherche-ami" type="text" placeholder="Pseudo du joueur..." maxlength="20" onkeydown="if(event.key==='Enter')envoyerDemandeAmi()" data-i18n="phFriendSearch" data-i18n-attr="placeholder">
    <button onclick="envoyerDemandeAmi()" data-i18n="add">AJOUTER</button>
  </div>
  <div class="panel-amis-tabs">
    <button class="tab-ami active" id="tab-en-ligne" onclick="switchTabAmi('en-ligne')" data-i18n="onlineLabel">En ligne</button>
    <button class="tab-ami" id="tab-hors-ligne" onclick="switchTabAmi('hors-ligne')" data-i18n="offlineLabel">Hors ligne</button>
    <button class="tab-ami" id="tab-demandes" onclick="switchTabAmi('demandes')"><span data-i18n="requestsLabel">Demandes</span> <span class="count-demandes" id="count-demandes"></span></button>
  </div>
  <div id="panel-amis-contenu" class="panel-amis-liste">
    <div class="panel-amis-vide" data-i18n="noFriendsYet" data-i18n-html>Aucun ami pour le moment.<br>Ajoute des joueurs avec leur pseudo !</div>
  </div>
</div>

<!-- ============================== -->
<!-- POPUP INVITATION RECUE -->
<!-- ============================== -->
<div id="popup-invitation">
  <h3>INVITATION</h3>
  <p id="invitation-texte">Un ami t'invite a rejoindre sa partie !</p>
  <div class="popup-btns">
    <button class="demande-btn-accepter" onclick="accepterInvitation()">ACCEPTER</button>
    <button class="demande-btn-refuser" onclick="refuserInvitation()">REFUSER</button>
  </div>
</div>

<div class="notif-container" id="notif-container"></div>

<!-- JS -->
<script src="js/config.js"></script>
<script src="js/skins.js"></script>
<script src="js/music.js"></script>
<script src="js/account.js"></script>
<script src="js/ui.js?v=20260224a"></script>
<script src="js/chat.js"></script>
<script src="js/translation.js"></script>
<script src="js/firebase-sync.js?v=7"></script>
<script src="js/player.js?v=5"></script>
<script src="js/shop.js"></script>
<script src="js/bots.js"></script>
<script src="js/game.js?v=6"></script>
<script src="js/roles.js?v=5"></script>
<script src="js/meeting.js?v=5"></script>
<script src="js/missions.js"></script>
<script src="js/minigames.js"></script>
<script src="js/cameras.js"></script>
<script src="js/friends.js"></script>

<script>
// Initialisation (apres que tous les scripts et le DOM sont prets)
(function() {
  // Verifier compte et afficher le bon ecran
  initCompteEtFirebase();
  // Afficher le bouton amis
  var pseudo = getPseudo();
  var btnAmis = document.getElementById('btn-amis');
  if (pseudo && btnAmis) btnAmis.style.display = 'flex';
  // Re-traduire toute la page
  translatePage();
})();
</script>
</body>
</html>